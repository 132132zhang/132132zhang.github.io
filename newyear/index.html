<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="spm-id" content="a21bo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>摇出你自己的新年签</title>
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/index.js"></script>
    <script type="text/javascript">
 		var SHAKE_THRESHOLD = 3000;  
        var last_update = 0;  
        var x = y = z = last_x = last_y = last_z = 0; 
        init();
        function init() {  
            if (window.DeviceMotionEvent) {  
                window.addEventListener('devicemotion', deviceMotionHandler, false);  
            } else {  
                alert('not support mobile event');  
            }  
        }  
        function deviceMotionHandler(eventData) {  
            var acceleration = eventData.accelerationIncludingGravity;  
            var curTime = new Date().getTime();  
            if ((curTime - last_update) > 50) {  
                var diffTime = curTime - last_update;  
                last_update = curTime;  
                x = acceleration.x;  
                y = acceleration.y;  
                z = acceleration.z;  
                var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;  
  
                if (speed > SHAKE_THRESHOLD) {  
//              	var audio = document.createElement("audio");
//              	document.getElementById("heade").appendChild(audio);               	
//              	var voice = document.createElement("source");
//              	audio.appendChild(voice);
//              	audio.setAttribute("autoplay","autoplay");
//              	voice.setAttribute("src","css/abc.mp3");
					setTimeout(function() {
						location.href="shake.html";
					}, 1000);   
                }  
                last_x = x;  
                last_y = y;  
                last_z = z;  
            }  
        }  

    </script>
    
</head>
<body>
    <div class="header" id="heade"> 
        <div class="headerBox">
            <div class="photo">
                <img src="" id = "headpic"/>
            </div>
            <div class="nicheng">
            	<span class="name" id = "nickname"></span>
            	<span class="news">的新年签</span>
            </div>
        </div>
    </div>
    <div class="box"><img src="img/index.png" alt=""/></div>
</body>
</html>
